webpackJsonp([3],{0:function(e,t,r){e.exports=r(74)},2:function(e,t,r){"use strict";var s=r(1),n={login:function(e,t,r){s.request({url:s.getServerUrl("/user/login"),data:e,method:"POST",success:t,error:r})},checkUsername:function(e,t,r){s.request({url:s.getServerUrl("/user/checkValid"),data:{type:"username",str:e},method:"POST",success:t,error:r})},register:function(e,t,r){s.request({url:s.getServerUrl("/user/register"),data:e,method:"POST",success:t,error:r})},checkLogin:function(e,t){s.request({url:s.getServerUrl("/user/get_user_info"),method:"POST",success:e,error:t})},getQuestion:function(e,t,r){s.request({url:s.getServerUrl("/user/forget_get_question"),data:{username:e},method:"POST",success:t,error:r})},checkAnswer:function(e,t,r){s.request({url:s.getServerUrl("/user/forget_check_answer"),data:e,method:"POST",success:t,error:r})},resetPassword:function(e,t,r){s.request({url:s.getServerUrl("/user/forget_reset_password"),data:e,method:"POST",success:t,error:r})},getUserInfo:function(e,t){s.request({url:s.getServerUrl("/user/get_information"),method:"POST",success:e,error:t})},updateUserInfo:function(e,t,r){s.request({url:s.getServerUrl("/user/update_information"),data:e,method:"POST",success:t,error:r})},updatePassword:function(e,t,r){s.request({url:s.getServerUrl("/user/reset_password"),data:e,method:"POST",success:t,error:r})},logout:function(e,t){s.request({url:s.getServerUrl("/user/logout"),method:"POST",success:e,error:t})}};e.exports=n},3:function(e,t,r){"use strict";var s=r(1),n={getCartCount:function(e,t){s.request({url:s.getServerUrl("/cart/get_cart_product_count"),success:e,error:t})},addToCart:function(e,t,r){s.request({url:s.getServerUrl("/cart/add"),data:e,success:t,error:r})},getCartList:function(e,t){s.request({url:s.getServerUrl("/cart/list"),success:e,error:t})},selectProduct:function(e,t,r){s.request({url:s.getServerUrl("/cart/select"),data:{productId:e},success:t,error:r})},unselectProduct:function(e,t,r){s.request({url:s.getServerUrl("/cart/un_select"),data:{productId:e},success:t,error:r})},selectAllProduct:function(e,t){s.request({url:s.getServerUrl("/cart/select_all"),success:e,error:t})},unselectAllProduct:function(e,t){s.request({url:s.getServerUrl("/cart/un_select_all"),success:e,error:t})},updateProduct:function(e,t,r){s.request({url:s.getServerUrl("/cart/update"),data:e,success:t,error:r})},deleteProduct:function(e,t,r){s.request({url:s.getServerUrl("/cart/deleteProduct"),data:{productIds:e},success:t,error:r})}};e.exports=n},4:function(e,t,r){"use strict";var s=r(1),n={getUserLevel:function(e,t){s.request({url:s.getServerUrl("/level/get_user_level"),success:e,error:t})}};e.exports=n},5:function(e,t){},6:function(e,t){},7:function(e,t,r){"use strict";r(5);var s=r(1),n={init:function(){this.onLoad(),this.bindEvent()},onLoad:function(){var e=s.getUrlParam("keyword");e&&$("#search-input").val(e)},bindEvent:function(){var e=this;$("#search-btn").click(function(){e.searchSubmit()}),$("#search-input").keyup(function(t){13===t.keyCode&&e.searchSubmit()})},searchSubmit:function(){var e=$.trim($("#search-input").val());e?window.location.href="./list.html?keyword="+e:s.goHome()}};n.init()},8:function(e,t,r){"use strict";r(6);var s=r(1),n=r(2),i=r(4),a=r(3),o={init:function(){return this.bindEvent(),this.loadUserInfo(),this.loadCartCount(),this},bindEvent:function(){$(".js-login").click(function(){window.location.href="./user-login.html?redirect="+encodeURIComponent(window.location.href)}),$(".js-register").click(function(){window.location.href="./user-register.html"}),$(".js-logout").click(function(){n.logout(function(e){window.location.reload()},function(e){s.errorTips(e)})})},loadUserInfo:function(){n.checkLogin(function(e){i.getUserLevel(function(e){$(".user-level").text(e)},function(e){}),$(".user.not-login").hide().siblings(".user.login").show().find(".username").text(e.username)},function(e){})},loadCartCount:function(){a.getCartCount(function(e){$(".nav .cart-count").text(e||0)},function(e){$(".nav .cart-count").text(0)})}};e.exports=o.init()},9:function(e,t){},10:function(e,t){e.exports='{{#navList}} {{#isActive}} <li class="nav-item active"> {{/isActive}} {{^isActive}} </li><li class="nav-item"> {{/isActive}} <a class="link" href="{{href}}">{{desc}}</a> </li> {{/navList}} '},11:function(e,t,r){"use strict";r(9);var s=r(1),n=r(10),i={option:{name:"",navList:[{name:"user-center",desc:"个人中心",href:"./user-center.html"},{name:"order-list",desc:"我的订单",href:"./order-list.html"},{name:"user-pass-update",desc:"修改密码",href:"./user-pass-update.html"},{name:"customer-service",desc:"售后管理",href:"./customer-service.html"},{name:"about",desc:"关于麦乐",href:"./about.html"}]},init:function(e){$.extend(this.option,e),this.renderNav()},renderNav:function(){for(var e=0,t=this.option.navList.length;e<t;e++)this.option.navList[e].name===this.option.name&&(this.option.navList[e].isActive=!0);var r=s.renderHtml(n,{navList:this.option.navList});$(".nav-side").html(r)}};e.exports=i},14:function(e,t){},15:function(e,t){e.exports='<div class="pg-content"> {{#pageArray}} {{#disabled}} <span class="pg-item disabled" data-value="{{value}}">{{name}}</span> {{/disabled}} {{^disabled}} {{#active}} <span class="pg-item active" data-value="{{value}}">{{name}}</span> {{/active}} {{^active}} <span class="pg-item" data-value="{{value}}">{{name}}</span> {{/active}} {{/disabled}} {{/pageArray}} <span class="pg-total">{{pageNum}} / {{pages}}</span> </div>'},17:function(e,t,r){"use strict";r(14);var s=r(1),n=r(15),i=function(){var e=this;this.defaultOption={container:null,pageNum:1,pageRange:3,onSelectPage:null},$(document).on("click",".pg-item",function(){var t=$(this);t.hasClass("active")||t.hasClass("disabled")||("function"==typeof e.option.onSelectPage?e.option.onSelectPage(t.data("value")):null)})};i.prototype.render=function(e){this.option=$.extend({},this.defaultOption,e),this.option.container instanceof jQuery&&(this.option.pages<=1||this.option.container.html(this.getPaginationHtml()))},i.prototype.getPaginationHtml=function(){var e="",t=this.option,r=[],i=t.pageNum-t.pageRange>0?t.pageNum-t.pageRange:1,a=t.pageNum+t.pageRange<t.pages?t.pageNum+t.pageRange:t.pages;r.push({name:"上一页",value:this.option.prePage,disabled:!this.option.hasPreviousPage});for(var o=i;o<=a;o++)r.push({name:o,value:o,active:o===t.pageNum});return r.push({name:"下一页",value:this.option.nextPage,disabled:!this.option.hasNextPage}),e=s.renderHtml(n,{pageArray:r,pageNum:t.pageNum,pages:t.pages})},e.exports=i},18:function(e,t,r){"use strict";var s=r(1),n={getServiceList:function(e,t,r){s.request({url:s.getServerUrl("/customer_service/list"),data:e,success:t,error:r})},deleteService:function(e,t,r,n){s.request({url:s.getServerUrl("/customer_service/delete"),data:{id:e,orderNo:t},success:r,error:n})},addSerive:function(e,t,r,n,i){s.request({url:s.getServerUrl("/customer_service/add"),data:{orderNo:e,title:t,mainContent:r},success:n,error:i})},editService:function(e,t,r,n,i){s.request({url:s.getServerUrl("/customer_service/update"),data:{id:e,title:t,mainContent:r},success:n,error:i})}};e.exports=n},30:function(e,t){},50:function(e,t){e.exports='<div class="list"> {{#list}} <div class="list-item" data-service-id="{{id}}" data-order-no="{{orderNo}}"> <div class="title"> <span>订单号：<a class="link order-num" href="./order-detail.html?orderNumber={{orderNo}}" target="_blank">{{orderNo}}</a></span> <span>申请时间：{{createTime}}</span> <span>状态：{{status}}</span> </div> <div class="content"> <div>简述：<span class="service-title">{{title}}</span></div> <div>详细情况：<span class="service-main-content">{{mainContent}}</span></div> </div> {{#reply}} <div class="reply">客服回复：{{reply}}</div> {{/reply}} <div class="btn edit-btn">编辑</div> <div class="btn delete-btn">撤销</div> </div> {{/list}} {{^list}} <div>您目前没有订单在售后状态中哦~</div> {{/list}} </div>'},74:function(e,t,r){"use strict";r(30),r(8),r(7);var s=r(1),n=r(11),i=r(18),a=r(17),o=r(50),c={data:{listParam:{pageNum:1,pageSize:2}},init:function(){this.onload(),this.loadServiceList(),this.bindEvent()},onload:function(){n.init({name:"customer-service"})},loadServiceList:function(){var e=this,t="",r=$(".customer-service-list");r.html('<div class="loading"></div>'),i.getServiceList(e.data.listParam,function(n){e.dataFileter(n),t=s.renderHtml(o,n),r.html(t),e.loadPagination({hasPreviousPage:n.hasPreviousPage,prePage:n.prePage,hasNextPage:n.hasNextPage,nextPage:n.nextPage,pageNum:n.pageNum,pages:n.pages})},function(e){r.html('<p class="err-tip">加载失败，请刷新后重试</p>')})},bindEvent:function(){var e=this;$(document).on("click",".delete-btn",function(){if(window.confirm("确实要删除该订单服务吗？")){var t=$(this).parents(".list-item").data("service-id"),r=$(this).parents(".list-item").data("order-no");i.deleteService(t,r,function(t){s.successTips("该服务删除成功"),e.loadServiceList()},function(e){s.errorTips(e)})}}),$(document).on("click",".edit-btn",function(){var e=$(".service-title").text(),t=$(".service-main-content").text(),r=$(this).parents(".list-item").data("service-id"),s=$(this).parents(".list-item").data("order-no");window.location.href="./customer-service-form.html?orderNumber="+s+"&serviceId="+r+"&title="+e+"&mainContent="+t})},dataFileter:function(e){var t=this;$.each(e.list,function(r,s){e.list[r].createTime=t.format(s.createTime)})},loadPagination:function(e){var t=this;this.pagination?"":this.pagination=new a,this.pagination.render($.extend({},e,{container:$(".pagination"),onSelectPage:function(e){t.data.listParam.pageNum=e,t.loadServiceList()}}))},format:function(e){var t=new Date(e),r=t.getFullYear(),s=t.getMonth()+1,n=t.getDate(),i=t.getHours(),a=t.getMinutes(),o=t.getSeconds();return r+"-"+this.add0(s)+"-"+this.add0(n)+" "+this.add0(i)+":"+this.add0(a)+":"+this.add0(o)},add0:function(e){return e<10?"0"+e:e}};$(function(){c.init()})}});